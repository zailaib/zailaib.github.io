---
import type { CollectionEntry } from 'astro:content';

interface SidebarPost {
  title: string;
  slug: string;
  date: string;
  tags: string | string[];
}

interface Props {
  postsByCategory: Record<string, SidebarPost[]>;
}

const { postsByCategory } = Astro.props;
---

<aside class="sidebar">
  {Object.entries(postsByCategory).map(([category, categoryPosts]) => (
    <section>
      <h2>{category}</h2>
      <ul>
        {categoryPosts.map(post => (
          <li>
            <a href={`/posts/${post.slug}`} data-astro-transition="animate">
              {post.title}
            </a>
            <time>{new Date(post.date).toLocaleDateString()}</time>
            {post.tags && (
              <span> - {Array.isArray(post.tags) ? post.tags.join(', ') : post.tags} </span>
            )}
          </li>
        ))}
      </ul>
    </section>
  ))}
</aside>

<style>
  .sidebar {
    width: 300px;
    position: sticky;
    top: 1rem;
  }
  
  .sidebar section {
    margin-bottom: 2rem;
  }
  
  .sidebar h2 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: #333;
  }
  
  .sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .sidebar li {
    margin-bottom: 0.5rem;
  }
  
  .sidebar a {
    color: #007bff;
    text-decoration: none;
  }
  
  .sidebar a:hover {
    text-decoration: underline;
  }
  
  .sidebar time {
    font-size: 0.8rem;
    color: #666;
    display: block;
  }
  
  .sidebar span {
    font-size: 0.8rem;
    color: #888;
  }
</style>
