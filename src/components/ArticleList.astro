---
// src/components/ArticleList.astro
import ArticleCard from './ArticleCard.astro';
import { groupByCategory } from './utils';
import type { ArticleListProps, Post } from '../types';

const { articles, groupByCategory: group, showDate, showTags } = Astro.props as ArticleListProps;

// 判断是否按分类分组
const groupedArticles = group ? groupByCategory(articles) : null;
---

<div class="article-list">
  {groupedArticles 
    ? Object.entries(groupedArticles).map(([category, posts]) => (
        <section>
          <h3>{category}</h3>
          {posts.map(post => (
            <ArticleCard {...post} showDate={showDate} showTags={showTags} />
          ))}
        </section>
      ))
    : articles.map(post => (
        <ArticleCard {...post} showDate={showDate} showTags={showTags} />
      ))}
</div>

<style>
.article-list h3 { margin-top: 2rem; }
</style>